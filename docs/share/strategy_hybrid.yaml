# í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ (ê¶Œì¥)
# ê³µê²©ì  + ë³´ìˆ˜ì  + ë¶€ë¶„ì²­ì‚°ì˜ ì¥ì  ê²°í•©

trailing:
  activation_pct: 1.5        # ë¬¸ì„œ ëª…ì„¸: íŠ¸ë ˆì¼ë§ í™œì„±í™” +1.5%
  ratio: 1.0                 # ë¬¸ì„œ ëª…ì„¸: íŠ¸ë ˆì¼ë§ ë¹„ìœ¨ -1.0%
  stop_loss_pct: 3.0         # ë¬¸ì„œ ëª…ì„¸: ê¸°ë³¸ ì†ì ˆ -3.0%

  use_profit_tier: true      # í° ìˆ˜ìµ ì‹œ ê°•í™” âœ…
  profit_tier_threshold: 6.0 # ğŸ”§ FIX: +6% ë„ë‹¬ ì‹œ (ë¬¸ì„œ ëª…ì„¸ ë°˜ì˜)
  profit_tier_ratio: 0.5     # 0.5%ë¡œ ê°•í™”

  use_atr_based: true        # ğŸ”§ FIX: ATR ê¸°ë°˜ íŠ¸ë ˆì¼ë§ í™œì„±í™” (ë¬¸ì„œ ëª…ì„¸)
  atr_multiplier: 1.3        # âœ… ChatGPT ë¦¬ë·°: ATRÃ—1.3 (1.5â†’1.3, ì½”ìŠ¤ë‹¥ ë³€ë™ì„± ê³ ë ¤)

filters:
  use_trend_filter: true
  trend_period: 20

  use_volume_filter: true
  volume_multiplier: 1.2     # ê¸°ë³¸ê°’ ìœ ì§€

  use_breakout_confirm: false
  breakout_confirm_candles: 2

  use_volume_value_filter: false
  min_volume_value: 1000000000

  use_market_momentum: false

  use_daily_trend_filter: true

  use_volatility_filter: true   # ìœ„í—˜ ì¢…ëª© ì œì™¸ âœ…
  min_atr_pct: 0.5
  max_atr_pct: 4.5             # ë„ˆë¬´ ìœ„í—˜í•œ ì¢…ëª© ë°°ì œ

time_filter:
  use_time_filter: true        # ğŸ”§ FIX: ì¥ ì´ˆë°˜/ë§ˆê° íšŒí”¼ í™œì„±í™” (ë¬¸ì„œ ëª…ì„¸)
  market_open: "09:00"
  market_close: "15:20"
  avoid_early_minutes: 30      # ğŸ”§ FIX: 09:30ê¹Œì§€ íšŒí”¼ (ë¬¸ì„œ ëª…ì„¸) [ë³µì›: 10â†’30]
  avoid_late_minutes: 21       # ğŸ”§ FIX: 14:59ê¹Œì§€ë§Œ ì§„ì… (15:20-21=14:59) [ë³µì›: 10â†’21]

  # ğŸ“Š ML: ê±°ë˜ ë°ì´í„° ë¶„ì„ ê¸°ë°˜ ì‹œê°„ëŒ€ ê°€ì¤‘ì¹˜
  time_weight:
    morning_penalty: 0.5       # 09:30~12:00 ì‹ í˜¸ ê°€ì¤‘ì¹˜ 50% ê°ì†Œ (ìŠ¹ë¥  10%)
    afternoon_bonus: 1.5       # 14:00~14:59 ì‹ í˜¸ ê°€ì¤‘ì¹˜ 50% ì¦ê°€ (ìŠ¹ë¥  100%)

re_entry:
  use_cooldown: true           # ì¬ì§„ì… ë°©ì§€ âœ…
  cooldown_minutes: 20         # ì ì ˆí•œ ëŒ€ê¸° ì‹œê°„

risk_management:
  initial_capital: 10000000
  daily_target_profit_pct: 2.0 # ğŸ¯ ì¼ì¼ ëª©í‘œ ìˆ˜ìµ 2% (ì•½ 7,500ì›)
  daily_max_loss_pct: 2.0      # ì¼ì¼ ì†ì‹¤ 2%
  max_drawdown_pct: 10.0
  max_trades_per_day: 15       # ğŸ“Š DATA: ê±°ë˜ ë°ì´í„° ê¸°ë°˜ (10â†’15)
  max_consecutive_losses: 3
  max_positions: 3             # ğŸ”§ CRITICAL FIX: ë™ì‹œ ë³´ìœ  ìµœëŒ€ 3ê°œ (ëˆ„ë½ í•­ëª© ì¶”ê°€)
  position_risk_pct: 1.0       # í¬ì§€ì…˜ë‹¹ ë¦¬ìŠ¤í¬ 1%
  min_rr_ratio: 1.5

  # ğŸ”§ REFACTOR: RiskManager ì¶”ê°€ ì„¤ì •
  min_cash_reserve_pct: 20     # ìµœì†Œ í˜„ê¸ˆ ë³´ìœ  ë¹„ìœ¨ 20%
  max_position_size_pct: 30    # í¬ì§€ì…˜ë‹¹ ìµœëŒ€ 30%
  hard_max_position: 300000    # í•˜ë“œ í¬ì§€ì…˜ ì œí•œ 30ë§Œì› (ì‹¤ê±°ë˜ ê³ ë ¤)

risk_control:
  max_daily_loss_pct: 3.0      # SignalOrchestrator L0 í•„í„°ìš© (ì¼ì¼ ì†ì‹¤ í•œë„)
  max_weekly_loss_pct: 5.0     # ğŸ”§ REFACTOR: ì£¼ê°„ ì†ì‹¤ í•œë„ 5%
  hard_stop_pct: 2.5           # ğŸ”§ FIX: ë¹„ìƒ í•˜ë“œ ìŠ¤íƒ‘ -2.5% (ê±°ë˜ ë¶„ì„ ê¸°ë°˜ ê°•í™”)
  technical_stop_pct: 1.5      # ê¸°ìˆ ì  ì†ì ˆì„  -1.5%

  # ì´ˆê¸° ì‹¤íŒ¨ ì»· (ì†ìµë¹„ ê°œì„ ì˜ í•µì‹¬)
  early_failure:
    enabled: true              # í™œì„±í™”
    window_minutes: 30         # ğŸ“Š ML: 30ë¶„ìœ¼ë¡œ ì—°ì¥ (ì´ˆë‹¨íƒ€ ë°©ì§€, í‰ê·  ìŠ¹ë¦¬ ë³´ìœ  124ë¶„)
    loss_cut_pct: -1.6         # ğŸ“Š DATA: ì‹¤ì œ í‰ê·  ì†ì‹¤ -2.03%ì˜ 80% = -1.6%

partial_exit:
  enabled: true                # ë¶€ë¶„ ì²­ì‚° í•µì‹¬ ì „ëµ âœ…
  tiers:
    - profit_pct: 0.7          # ğŸ“Š DATA: í‰ê·  ìˆ˜ìµ +1.21%ì˜ 60% = +0.7%ì— 40% ì²­ì‚°
      exit_ratio: 0.4
    - profit_pct: 1.1          # ğŸ“Š DATA: í‰ê·  ìˆ˜ìµ +1.21%ì˜ 90% = +1.1%ì— 40% ì²­ì‚°
      exit_ratio: 0.4
    # ë‚˜ë¨¸ì§€ 20%ëŠ” íŠ¸ë ˆì¼ë§ ìŠ¤í†±ìœ¼ë¡œ ì¶”ê°€ ìˆ˜ìµ ì¶”êµ¬

trailing_stop:
  activation_profit_pct: 0.5   # ğŸ“Š DATA: í‰ê·  ìˆ˜ìµ +1.21%ì˜ 40% = +0.5%ì— íŠ¸ë ˆì¼ë§ ì‹œì‘
  distance_pct: 0.8            # ğŸ“Š DATA: ìµœê³ ê°€ ëŒ€ë¹„ -0.8% íŠ¸ë ˆì¼ë§ (íƒ€ì´íŠ¸í•˜ê²Œ)
  min_lock_profit_pct: 0.3     # ğŸ“Š DATA: ìµœì†Œ +0.3% ìˆ˜ìµ ë³´ì¥ (ì‘ì€ ìˆ˜ìµì´ë¼ë„ í™•ë³´)

vwap_exit:
  profit_threshold_for_ignore: 2.0  # +2.0% ì´ìƒì—ì„œëŠ” VWAP ë¬´ì‹œ
  multi_condition_required: true    # ë‹¤ì¤‘ ì¡°ê±´ í•„ìš” (VWAP ë‹¨ë… ì²­ì‚° ë°©ì§€)

time_based_exit:
  loss_breakeven_exit_time: "15:00:00"  # âš ï¸ EOD Managerë¡œ ëŒ€ì²´ ì˜ˆì • (Phase 1)
  final_force_exit_time: "15:05:00"     # âœ… ìˆ˜ì •: 15:05 (15:00â†’15:05, API ì§€ì—° ê³ ë ¤)
  loss_breakeven_threshold_pct: 0.0     # ì „ëŸ‰ ì²­ì‚°ìœ¼ë¡œ í†µì¼

# ========================================
# âœ… ChatGPT ë¦¬ë·° ë°˜ì˜: EOD ì •ì±… ì¶”ê°€
# ========================================
eod_policy:
  enabled: true                          # EOD Manager í™œì„±í™”
  check_time: "14:55:00"                 # âœ… ìˆ˜ì •: 14:55 (15:00ì—ì„œ ë³€ê²½, API ì§€ì—° ê³ ë ¤)
  force_exit_time: "15:05:00"            # âœ… ìˆ˜ì •: 15:05 (15:10ì—ì„œ ë³€ê²½)
  max_overnight_positions: 3             # ìµœëŒ€ ìµì¼ ë³´ìœ  ì¢…ëª© ìˆ˜
  min_overnight_score: 0.6               # ìµœì†Œ ë³´ìœ  ì ìˆ˜ (0.0-1.0)
  max_overnight_position_value_pct: 40  # âœ… ì¶”ê°€: ê³„ì¢Œ ìì‚°ì˜ 40%ê¹Œì§€ë§Œ ìµì¼ ë³´ìœ 

  # ìµì¼ ë³´ìœ  ê¸°ì¤€
  overnight_criteria:
    trend_weight: 0.4                    # ì¶”ì„¸ ê°€ì¤‘ì¹˜
    volume_weight: 0.3                   # ê±°ë˜ëŸ‰ ê°€ì¤‘ì¹˜
    news_weight: 0.3                     # ë‰´ìŠ¤/ì¬ë£Œ ê°€ì¤‘ì¹˜

    min_ema_state: true                  # EMA5 > EMA20 í•„ìˆ˜
    min_vol_z20: 1.0                     # ìµœì†Œ ê±°ë˜ëŸ‰ Z-score
    min_news_score: 50                   # ìµœì†Œ ë‰´ìŠ¤ ì ìˆ˜

  # âœ… ì¶”ê°€: ìš°ì„  ê°ì‹œ ë¦¬ìŠ¤íŠ¸ ì¡°ê±´ (ğŸ”¥ ChatGPT Fix: ì¡°ê±´ ê°•í™”)
  priority_watchlist:
    min_eod_score: 0.65                  # ìµœì†Œ EOD ì ìˆ˜ (0.55 â†’ 0.65)
    min_close_to_high_ratio: 0.88        # ì¢…ê°€/ê³ ê°€ ìµœì†Œ 88% (0.8 â†’ 0.88)
    min_vol_z20: 1.2                     # ìµœì†Œ ê±°ë˜ëŸ‰ Z-score (1.0 â†’ 1.2)
    min_news_score: 50                   # ìµœì†Œ ë‰´ìŠ¤ ì ìˆ˜ (45 â†’ 50, ì¤‘ë¦½ ì´ìƒ)

# ========================================
# âœ… ChatGPT ë¦¬ë·° ë°˜ì˜: ê°­ì—… ì¬ì§„ì… ì„¤ì •
# ========================================
gap_reentry:
  enabled: true
  gap_threshold_pct: 3.0                 # ê°­ì—… ê¸°ì¤€ (%)
  volume_z_threshold: 2.0                # ê±°ë˜ëŸ‰ Z-score ê¸°ì¤€
  check_window_minutes: 30               # ì²´í¬ ì‹œê°„ (ì¥ ì‹œì‘ í›„ 30ë¶„)
  reentry_confidence: 0.7                # ì¬ì§„ì… ì‹ ë¢°ë„
  first_candle_window: 5                 # âœ… ìˆ˜ì •: 3-5ë¶„ë´‰ ê¸°ì¤€ (1ë¶„ë´‰ì—ì„œ ì™„í™”)

logging:
  enabled: true
  log_dir: "logs"
  log_level: "INFO"

test:
  stock_symbols:
    - "005930"
    - "015760"
  data_days: 7
  interval: "5m"
